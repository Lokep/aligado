---
order: 100
---

![](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/10/171fea0fec0b4668~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp)

# 浏览器输入 url 后流程

## url 到加载渲染全过程

1. DNS 域名解析。
2. TCP 三次握手，建立接连。
3. 发送 HTTP 请求报文。
4. 服务器处理请求返回响应报文。
5. 浏览器解析渲染页面。
6. 四次挥手，断开连接。

**DNS** 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。DNS 是一个网络服务器，我们的域名解析简单来说就是在 DNS 上记录一条信息记录。

**TCP** 三次握手，四次挥手：握手挥手都是客户端发起，客户端结束。三次握手与四次挥手详解

**负载均衡** 请求在进入到真正的应用服务器前，可能还会先经过负责负载均衡的机器，它的作用是将请求合理地分配到多个服务器上，转发 HTTP 请求；同时具备具备防攻击等功能。可分为 DNS 负载均衡，HTTP 负载均衡，IP 负载均衡，链路层负载均衡等。

**Web Server** 请求经过前面的负载均衡后，将进入到对应服务器上的 Web Server，比如 Apache、Tomcat

**反向代理** 是工作在 HTTP 上的，一般都是 Nginx。全国各地访问 baidu.com 就肯定要通过代理访问，不可能都访问百度的那台服务器。 （VPN 正向代理，代理客户端）

**浏览器解析渲染过程** 返回的 html 传递到浏览器后，如果有 gzip 会先解压，找出文件编码格式，外链资源的加载 html 从上往下解析，遇到 js，css 停止解析渲染，直到 js 执行完成。解析 HTML，构建 DOM 树 解析 CSS，生成 CSS 规则树 合并 DOM 树和 CSS 规则，生成 render 树去渲染

不会引起 DOM 树变化，页面布局变化，改变元素样式的行为叫重绘

引起 DOM 树结构变化，页面布局变化的行为叫回流

**GUI 渲染线程**负责渲染浏览器界面 HTML 元素,当界面需要 重绘(Repaint) 或由于某种操作引发 回流(reflow) 时,该线程就会执行。在 Javascript 引擎运行脚本期间,GUI 渲染线程都是处于挂起状态的,也就是说被”冻结”了. 直到 JS 程序执行完成，才会接着执行。因此如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。JavaScript 是可操纵 DOM 的，如果在修改这些元素属性同时渲染界面，渲染前后元素数据可能不一致

**GPU 绘制多进程的浏览器** 主控进程，插件进程，GPU，tab 页（浏览器内核）多线程的浏览器内核：每一个 tab 页面可以看作是浏览器内核进程，然后这个进程是多线程的。

它有几大类子线程：

- GUI 线程
- JS 引擎线程
- 事件触发线程
- 定时器线程
- HTTP 请求线程
